import{a as u,o as r,e as d,x as _,y as h,f as t,A as q}from"./@vue-da3af5a5.js";import{g as E,h as m,_ as v,a as f,t as y,j as S,f as D,k as I}from"./@firebase-9cbab8cf.js";import{d as p,r as N}from"./index-e1f9ed1a.js";import"./tslib-4b8363ab.js";import"./idb-f62f60ab.js";import"./vue-router-e40f2014.js";import"./firebase-002e2309.js";const U={key:0},b=t("h1",null,"Edit",-1),A=t("p",null,"New username:",-1),B=t("p",null,"New Description: ",-1),C=t("br",null,null,-1),V={key:1},P=t("p",null,"Saving changes...",-1),j=t("div",{class:"spinner"},null,-1),M=[P,j],R={__name:"EditComponent",setup(g){const e=E().currentUser,a=u((e==null?void 0:e.displayName)||null),n=u(""),l=u(!1);e&&(async()=>{const c=m(f(p,"accounts"),v("UID","==",e.uid));(await y(c)).forEach(o=>{n.value=o.data().description})})();const x=async()=>{if(e)if(a.value&&n.value){try{l.value=!0,await S(e,{displayName:a.value}),console.log(e)}catch(i){console.error(i)}const c=m(f(p,"accounts"),v("UID","==",e.uid)),o=(await y(c)).docs[0].id,k=D(p,"accounts",o);try{await I(k,{description:n.value}),console.log("Description updated successfully"),l.value=!0,N.push("/account")}catch(i){console.error(i)}}else console.error("Username and description cannot be empty")};return(c,s)=>(r(),d("div",null,[l.value?(r(),d("div",V,M)):(r(),d("div",U,[b,A,_(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o)},null,512),[[h,a.value]]),B,_(t("textarea",{cols:"40",rows:"5","onUpdate:modelValue":s[1]||(s[1]=o=>n.value=o)},null,512),[[h,n.value]]),C,t("button",{onClick:x},"Save changes")]))]))}},L={__name:"EditProfileView",setup(g){return(w,e)=>(r(),q(R))}};export{L as default};
